<section class="pt-4 animated fadeIn main">
  <div class="container">
    <form [formGroup]="formNewTag" autocomplete="off" class="pt-2" (ngSubmit)="createDemand()">
      <div class="row">
        <div class="col-12">
          <div class="form-group">
            <label for="ministery">Para comenzar, selecciona una instituci√≥n:</label>
            <select class="form-control select-ministery" id="ministery" formControlName="ministery" (change)="getTags()">
              <option value="" hidden selected>Seleciona un ministerio</option>
              <option *ngFor="let ministery of ministeries" [ngValue]="ministery">{{ ministery.name }}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="form-group pt-4" *ngIf="formNewTag.controls.ministery.status === 'VALID'">
            <div class="info-ministery text-center">
              <h3>{{ formNewTag.value.ministery.name }}</h3>
              <img class="img-leader mt-3 mb-2" src="assets/ministries/{{formNewTag.value.ministery.image}}">
              <h6>{{ formNewTag.value.ministery.leader }}</h6>
            </div>
          </div>
          <div class="form-group" *ngIf="formNewTag.controls.ministery.status === 'VALID'">
            <label for="tag">Ingresa tu demanda:</label>
            <div class="ng-autocomplete">
              <ng-autocomplete
                [data]="tags"
                [placeHolder]="'Escribe tu demanda'"
                [itemTemplate]="itemTemplate"
                formControlName="tag">
              </ng-autocomplete>
              <ng-template #itemTemplate let-item>
              <a [innerHTML]="item"></a>
              </ng-template>
              </div>
            </div>
          <div class="form-group" *ngIf="formNewTag.controls.ministery.status === 'VALID'">
            <label for="tag">Ingresa tu email:</label>
            <input class="form-control" type="email" id="email" formControlName="email" placeholder="Escribe tu email">
          </div>
          <button [disabled]="formNewTag.invalid" type="submit" class="btn btn-primary d-block mx-auto mb-5">Ingresar</button>
          <swal
            #successSwal
            title="Tu demanda ha sido ingresada exitosamente!"
            toast="true"
            position="top-end"
            timer="6000"
            icon="success"
            [swalOptions]="{ showConfirmButton: false }">
          </swal>
        </div>
      </div>
    </form>
  </div>
</section>
